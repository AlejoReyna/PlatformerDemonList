{% load static %}
<nav class="navbar navbar-expand-lg fixed-top" id="main-navbar">
    <div class="container">

        <a class="navbar-brand pr-5" style="border-right: 1px solid #efefef;" href="{% url 'demonlist:list' %}">
            <img src="{% static "img/demonlist.png" %}" height="45" class="d-inline-block align-top"/>
        </a>

        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ml-auto">

                {% if user.id %}
                <li class="nav-item">
                    <a href="{% url "users:detail" request.user.id %}">
                        {% if request.user.profile.picture %}
                            <img src="{{ request.user.profile.picture.url }}" width="35" height="35" class="d-inline-block align-top rounded-circle"/>
                        {% else %}
                            <img src="{% static 'img/default-profile.png' %}" width="35" height="35" class="d-inline-block align-top rounded-circle"/>
                        {% endif %}
                    </a>
                </li>
                {% endif %}

                {% if user.groups.get|stringformat:"s" == "Mod" %}
                <li class="nav-item nav-icon" >
                    <a href="{% url 'demonlist:add_edit_demon' %}">Add/Edit demon
                    </a>
                </li>
                {% endif %}

                {% if user.groups.get|stringformat:"s" == "Mod" %}
                <li class="nav-item nav-icon" style="margin-right: 30px;">
                    <a href="{% url 'demonlist:check_records' %}">Check records
                    </a>
                </li>
                {% endif %}

                <div class="dropdown">
                    <button class="dropbtn" id="menuBtn">
                        <i class="fas fa-bars"></i> Menú
                    </button>
                    <div class="dropdown-content" id="menuContent">
                        <a href="{% url 'demonlist:stats_viewer' %}">
                            <i class="fas fa-chart-bar"></i> Stats viewer
                        </a>
                        <a href="{% url 'demonlist:submit_record' %}">
                            <i class="fas fa-plus"></i> Submit record
                        </a>
                        <a href="{% url 'guidelines' %}">
                            <i class="fas fa-question-circle"></i> Guidelines
                        </a>
                        <form method="post" action="{% url 'users:logout' %}">
                            {% csrf_token %}
                            <button type="submit" class="custom-button">
                                {% if request.user.id %}
                                    <i class="fas fa-sign-out-alt" style="font-size: 22px;"></i> Logout
                                {% else %}
                                    <i class="fas fa-sign-in-alt" style="font-size: 22px;"></i> Login
                                {% endif %}
                            </button>
                        </form>
                    </div>
                </div>
                
                <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

                <script>
                    $("#menuContent").hide();
                    $(document).ready(function () {
                        $("#menuBtn").click(function () {
                            $("#menuContent").toggle();
                        });
                
                        // Oculta el menú si se hace clic fuera de él
                        $(document).on("click", function (event) {
                            if (!$(event.target).closest(".dropdown").length) {
                                $("#menuContent").hide();
                            }
                        });
                    });
                </script>
            </ul>
        </div>
    </div>
</nav>
<script>
    // Obtén el elemento con la clase "nav-icon"
    function change_color(){
    }
</script>